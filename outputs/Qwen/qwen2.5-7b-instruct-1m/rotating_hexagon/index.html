&lt;!DOCTYPE html&gt\n&lt;html&gt\n    &lt;head&gt\n        &lt;title&gt;Rotating Hexagon with Bouncing Balls&lt;/title&gt\n        &lt;style&gt;\n            body { margin: 0; overflow: hidden; }\n            canvas { display: block; }\n        &lt;/style&gt\n    &lt;/head&gt\n    &lt;body&gt\n        &lt;canvas id="canvas" width="800" height="600"></canvas&gt\n        &lt;script&gt;&lt;/script&gt\n    &lt;/body&gt\n&lt;/html&gt<script>
document.body.style.background = "#000";
canvas.width = canvas.width;
var canvases = [document.getElementById("canvas");], balls = [];
for (i = 0; i < 10; i++) {
balls.push({x: Math.random() * 800, y: Math.random() * 600, dx: (Math.random() - 0.5) * 2, dy: (Math.random() - 0.5) * 2});
}
drawBalls = function () {
canvases.forEach(function (cvs) {
cvs.clearRect(0, 0, cvs.width, cvs.height);
balls.forEach(function (ball) {
cctx = canvases[canvases.indexOf(cvs)].getContext("2d");
cctx.beginPath();
cctx.arc(ball.x, ball.y, 15, 0, Math.PI * 2);
cctx.fillStyle = "red";
cctx.fill();
bounceBall(ball, cvs.width, cvs.height);
});
});
tsetInterval(drawBalls, 16);
function bounceBall(ball, w, h) {
var nx, ny;
if (ball.x + ball.dx &lt;= 0 || ball.x + ball.dx >= w - 30) {
bounceHorizontally(ball, w);
} else if (ball.y + ball.dy &lt;= 0 || ball.y + ball.dy >= h - 30) {
bounceVertically(ball, h);
}
function bounceOnEdge(ball, axis, angle) {
ball[axis + "dx"] *= -1;
if (axis == "x") {
diff = ball.y - hexagon.centerY;
bounceAngle = Math.atan2(diff, ball.x - hexagon.centerX);
bounceAngle += angle;
ball.dy = Math.cos(bounceAngle) * ball.speed;
bounceAngle = Math.atan2(-diff, w - ball.x - 30);
bounceAngle += angle;
ball.dx = Math.cos(bounceAngle) * ball.speed;
} else {
diff = ball.x - hexagon.centerX;
bounceAngle = Math.atan2(diff, ball.y - hexagon.centerY);
bounceAngle += angle;
ball.dx = Math.cos(bounceAngle) * ball.speed;
bounceAngle = Math.atan2(-diff, h - ball.y - 30);
bounceAngle += angle;
ball.dy = Math.cos(bounceAngle) * ball.speed;
}
}</script>
<script>
function drawHexagon() {
clearInterval(hexagon.id);
hexagon.id = setInterval(function () {
var radians = Math.PI / 180 * hexagon.rotateAngle;
currentX = hexagon.centerX + Math.cos(radians) * hexagon.sideLength;
currentY = hexagon.centerY + Math.sin(radians) * hexagon.sideLength;
hexagon.rotateAngle++;
ctx.clearRect(0, 0, canvas.width, canvas.height);
ctx.beginPath();
currentX -= hexagon.sideLength / 2;
currentY -= hexagon.sideLength / 2;
for (var i = 60; i >= 0; i--) {
x1 = currentX + Math.cos(Math.PI * (i / 60.0)) * hexagon.sideLength / 2;
y1 = currentY + Math.sin(Math.PI * (i / 60.0)) * hexagon.sideLength / 2;
if (i % 3 == 0) {
x2 = x1 - Math.cos(Math.PI * (i / 60.0 + 1 / 3.0)) * hexagon.sideLength / 4;
y2 = y1 - Math.sin(Math.PI * (i / 60.0 + 1 / 3.0)) * hexagon.sideLength / 4;
} else {
x2 = x1 + Math.cos(Math.PI * (i / 60.0 + 1 / 6.0)) * hexagon.sideLength / 4;
y2 = y1 + Math.sin(Math.PI * (i / 60.0 + 1 / 6.0)) * hexagon.sideLength / 4;
}
currentX += (x2 - currentX) / 3;
currentY += (y2 - currentY) / 3;
ctx.moveTo(x1, y1);
ctx.lineTo(currentX, currentY);
}, 60);
hexagon.id = setInterval(function () {
document.body.style.background = "#000";
canvas.width = canvas.width;
var canvases = [document.getElementById("canvas");], balls = [];
for (i = 0; i < 10; i++) {
balls.push({x: Math.random() * 800, y: Math.random() * 600, dx: (Math.random() - 0.5) * 2, dy: (Math.random() - 0.5) * 2});
}
drawBalls = function () {
canvases.forEach(function (cvs) {
cvs.clearRect(0, 0, cvs.width, cvs.height);
balls.forEach(function (ball) {
cctx = canvases[canvases.indexOf(cvs)].getContext("2d");
cctx.beginPath();
cctx.arc(ball.x, ball.y, 15, 0, Math.PI * 2);
cctx.fillStyle = "red";
cctx.fill();
bounceBall(ball, cvs.width, cvs.height);}));
});
tsetInterval(drawBalls, 16);
function bounceBall(ball, w, h) {
var nx, ny;
if (ball.x + ball.dx <= 0 || ball.x + ball.dx >= w - 30) {
bounceHorizontally(ball, w);
} else if (ball.y + ball.dy <= 0 || ball.y + ball.dy >= h - 30) {
bounceVertically(ball, h);
}
function bounceOnEdge(ball, axis, angle) {
ball[axis + "dx"] *= -1;
if (axis == "x") {
diff = ball.y - hexagon.centerY;
bounceAngle = Math.atan2(diff, ball.x - hexagon.centerX);
bounceAngle += angle;
ball.dy = Math.cos(bounceAngle) * ball.speed;
bounceAngle = Math.atan2(-diff, w - ball.x - 30);
bounceAngle += angle;
ball.dx = Math.cos(bounceAngle) * ball.speed;} else {
diff = ball.x - hexagon.centerX;
bounceAngle = Math.atan2(diff, ball.y - hexagon.centerY);
bounceAngle += angle;
ball*dx* = Math.cos(bounceAngle) * ball.speed;
bounceAngle = Math.atan2(-diff, h - ball.y - 30);
bounceAngle += angle;
ball.dy = Math.cos(bounceAngle) * ball.speed;}
}</script>
